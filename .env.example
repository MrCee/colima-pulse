# ==============================================================================
# Colima Pulse â€” Environment Configuration
# ==============================================================================
# Copy this file to:
#   .env
# and adjust values as needed.
#
# Safety defaults:
#   - FULL_RESET=false
#   - RESET_BACKUP_MODE=prompt
#   - RESET_REQUIRE_CONFIRM=true
#   - PRUNE_MODE=images (only runs AFTER docker is stable, and only when FULL_RESET=true unless overridden)
# ==============================================================================

# ------------------------------------------------------------------------------
# REQUIRED
# ------------------------------------------------------------------------------
# The macOS user that owns Homebrew AND will run Colima.
# MUST be a valid local user.
HOMEBREW_USER=your_username_here

# ------------------------------------------------------------------------------
# RESET MODE
# ------------------------------------------------------------------------------
# true  = NUCLEAR reset (requires typed confirmation unless RESET_REQUIRE_CONFIRM=false)
# false = Keep VM/state, restart + re-supervise
FULL_RESET=false

# ------------------------------------------------------------------------------
# COLIMA SETTINGS (LOCKED: runtime docker + vm-type qemu)
# ------------------------------------------------------------------------------
COLIMA_PROFILE=default
COLIMA_RUNTIME=docker
COLIMA_VM_TYPE=qemu

# Resource limits
COLIMA_CPUS=2
COLIMA_MEMORY=2      # GiB
COLIMA_DISK=60       # GiB

# ------------------------------------------------------------------------------
# LAUNCHD SERVICE (label + log)
# ------------------------------------------------------------------------------
# LABEL is the LaunchDaemon identity; default is repo-canonical: homebrew.mrcee.colima-pulse
LABEL=homebrew.mrcee.colima-pulse
LOG_PATH=/var/log/colima.log

# ------------------------------------------------------------------------------
# SAFETY GUARDRAILS
# ------------------------------------------------------------------------------
# true  = typed confirmation required when FULL_RESET=true
# false = no typed confirmation (NOT recommended)
RESET_REQUIRE_CONFIRM=true

# Typed token required when FULL_RESET=true (if RESET_REQUIRE_CONFIRM=true)
RESET_CONFIRM_TOKEN=DESTROY

# Backup of state before deletion: prompt|true|false
RESET_BACKUP_MODE=prompt

# Where backups are written
BACKUP_DIR_BASE=./backups

# What to include in backup (if selected)
BACKUP_INCLUDE_DOT_COLIMA=true
BACKUP_INCLUDE_CONFIG_COLIMA=true

# ------------------------------------------------------------------------------
# CLEANUP OF OTHER COLIMA LAUNCHD SERVICES (prevents double VM: ~/.colima + ~/.config/colima)
# ------------------------------------------------------------------------------
# prompt|true|false
# - prompt: ask once, only when it detects other colima launchd labels
# - true: remove them automatically (dangerous on shared hosts)
# - false: leave them alone
CLEAN_OTHER_COLIMA_DAEMONS=prompt

# ------------------------------------------------------------------------------
# PRUNE MODE (runs only AFTER docker is stable)
# ------------------------------------------------------------------------------
# none        = no prune
# images      = docker image prune -af
# aggressive  = docker system prune -af --volumes  (DESTRUCTIVE)
#
# Default behavior:
# - If FULL_RESET=true and PRUNE_MODE is not set, script uses PRUNE_MODE=images
PRUNE_MODE=none

# ------------------------------------------------------------------------------
# NON-INTERACTIVE DESTRUCTIVE PROTECTION
# ------------------------------------------------------------------------------
# If FULL_RESET=true in non-interactive mode, script will abort unless FORCE_YES=true.
FORCE_YES=false

# ------------------------------------------------------------------------------
# OPTIONAL: TEMPLATE SYNC (OFF by default)
# ------------------------------------------------------------------------------
# true  = write .env.example from script template AND append missing keys to .env (with backup)
# false = do nothing
SYNC_TEMPLATES=false

